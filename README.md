# SvedUch
Журнал завуча

## Установка

Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск

Запустите приложение:
```bash
python main.py
```

## Сборка исполняемого файла

### Windows
Запустите скрипт сборки:
```bash
build.bat
```

### Linux/Mac
Запустите скрипт сборки:
```bash
chmod +x build.sh
./build.sh
```

### Ручная сборка
Или используйте PyInstaller с проектным spec-файлом (имя exe и версия берутся из `version.py`):
```bash
pip install pyinstaller
pyinstaller SvedUch.spec
```

Исполняемый файл будет в папке `dist` с именем вида `SvedUch-<версия>.exe` (версия задаётся в `version.py`).

## Сборка инсталлятора (Windows)

1. Соберите exe (см. выше): `pyinstaller SvedUch.spec`
2. Установите [Inno Setup 6](https://jrsoftware.org/isinfo.php)
3. Запустите сборку инсталлятора:
```bash
python build_installer.py
```

Инсталлятор будет создан в папке `installer_output` с именем `SvedUch-<версия>-Setup.exe`. Версия берётся из `version.py`. В состав установки входит удаление программы (секция Uninstall).

## База данных и резервная копия

При установке из exe база данных хранится в папке с программой (рядом с `SvedUch-<версия>.exe`) в файле `sveduch.db`.

- **Резервная копия:** в главном окне нажмите **«Резервная копия БД»**, выберите место сохранения (другой диск, флешка, облако). Имя по умолчанию — `SvedUch_backup_ГГГГ-ММ-ДД_ЧЧ-ММ.db`.
- **Восстановление при порче БД:** в главном окне нажмите **«Восстановить из копии»**, выберите ранее сохранённый файл `.db`, подтвердите замену — после этого перезапустите программу. Если приложение не запускается из-за повреждённой БД, при старте появится запрос выбрать резервную копию для восстановления; после копирования перезапустите приложение.
